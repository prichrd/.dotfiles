#!/bin/bash
set -e -x

BASE_PATH=$1
if [[ -z $BASE_PATH ]]; then
    exit 0
fi

fdcmd=fd

selected=$($fdcmd "\.git" $BASE_PATH --hidden --follow --type d --max-depth=4 | xargs dirname | sort | uniq | fzf -q "$1")
if [[ -z $selected ]]; then
    exit 0
fi

echo $selected
